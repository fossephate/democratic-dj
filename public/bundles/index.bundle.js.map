{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../shared/libs/utils.js","webpack:///./src/App.jsx","webpack:///./src/Index.jsx","webpack:///./src/Main.jsx","webpack:///./src/Room.jsx","webpack:///./src/components/Callback.jsx","webpack:///./src/components/general/Song.jsx","webpack:///./src/components/general/SongList.jsx","webpack:///./src/components/general/SongPreview.jsx","webpack:///./src/components/general/SongSubmitForm.jsx","webpack:///./src/features/settings.js","webpack:///./src/features/songs.js","webpack:///./src/reducers/index.js","webpack:///ws (ignored)"],"names":["getCookie","name","dc","document","cookie","prefix","begin","indexOf","end","length","decodeURI","substring","setCookie","value","seconds","expires","date","Date","setTime","getTime","toUTCString","clamp","n","min","max","Math","round","precision","multiplier","pow","msToTime","duration","milliseconds","parseInt","minutes","hours","substr","time","replaceAll","toggleFullscreen","elem","fullScreenElement","undefined","msFullscreenElement","mozFullScreen","webkitIsFullScreen","requestFullScreen","mozRequestFullScreen","webkitRequestFullScreen","Element","ALLOW_KEYBOARD_INPUT","msRequestFullscreen","cancelFullScreen","mozCancelFullScreen","webkitCancelFullScreen","msExitFullscreen","setToPercentParent","percent","$","height","parentHeight","parent","newHeight","wait","ms","start","mathZoom","current","target","accel","abs","normalizeVector","vector","scale","norm","sqrt","x","y","deleteAllCookies","cookies","split","i","eqPos","fixedLengthString","string","pad","getStickString","num","toFixed","String","padStart","getAverage","array","reduce","a","b","pick","props","o","e","interpolateColor","color1","color2","factor","arguments","result","slice","interpolateColors","steps","stepFactor","interpolatedColorArray","match","map","Number","push","size","mobile","tablet","laptop","desktop","device","styles","root","display","justifyContent","App","socket","state","roomName","open","serverConnection","close","store","dispatch","updateSettings","theme","title","console","log","path","classes","Component","mapStateToProps","mapDispatchToProps","compose","withRouter","withStyles","connect","IP","PORT","storeContext","React","createContext","rootReducer","combineReducers","dj","settings","Index","themeName","palette","type","primary","main","secondary","background","paper","createTheme","socketio","transports","getTheme","preloadedState","songs","songName","songList","searchResults","configureStore","reducer","nextProps","nextState","ReactDOM","render","getElementById","flexDirection","width","maxWidth","maxHeight","margin","whiteSpace","Main","history","emit","data","success","setState","alert","reason","event","textAlign","centerText","formPart","textField","handleText","joinButton","handleJoin","key","handleCreate","handleClose","PureComponent","fontSize","Room","username","openUsernameDialog","localforage","setItem","window","location","reload","then","href","getItem","code","loggedIn","params","on","updateSongList","clear","error","exportButton","handleLogin","spotifyButtonsContainer","handleCreatePlaylist","logoutButton","handleLogout","handleSubmitUsername","Callback","values","queryString","parse","search","replace","minHeight","upvoteArea","songUpvotes","alignSelf","placeNum","backgroundColor","marginRight","marginLeft","marginTop","marginBottom","Song","songData","updateSongName","updateSearchResults","upvoteState","neutralVote","isMobile","innerWidth","albumImage","album","images","buttonSize","isResult","url","preview_url","artists","submitButton","handleSubmitSong","votes","vote","handleUpvote","classNames","icon","highlighted","upvotes","handleDownvote","minWidth","flex","removeArea","handleRemove","forwardRef","gridGap","padding","overflowY","overflowX","position","noSongs","SongList","source","song","uri","mapSongs","albumArt","cursor","borderRadius","pointerEvents","opacity","left","top","SongPreview","playing","audio","pause","currentTime","audioURL","Audio","volume","play","prevProps","handleClick","imageURL","throttle","func","options","context","args","timeout","previous","later","leading","now","apply","remaining","clearTimeout","trailing","setTimeout","searchForSong","self","SongSubmitForm","settingsSlice","createSlice","initialState","reducers","action","payload","actions","songsSlice","form"],"mappings":"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","file":"index.bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"bundles/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./src/Index.jsx\",\"vendors~index\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export function getCookie(name) {\r\n\tlet dc = document.cookie;\r\n\tlet prefix = name + \"=\";\r\n\tlet begin = dc.indexOf(\"; \" + prefix);\r\n\tlet end;\r\n\tif (begin == -1) {\r\n\t\tbegin = dc.indexOf(prefix);\r\n\t\tif (begin !== 0) return null;\r\n\t} else {\r\n\t\tbegin += 2;\r\n\t\tend = document.cookie.indexOf(\";\", begin);\r\n\t\tif (end == -1) {\r\n\t\t\tend = dc.length;\r\n\t\t}\r\n\t}\r\n\t// because unescape has been deprecated, replaced with decodeURI\r\n\t//return unescape(dc.substring(begin + prefix.length, end));\r\n\treturn decodeURI(dc.substring(begin + prefix.length, end));\r\n}\r\n\r\nexport function setCookie(name, value, seconds) {\r\n\tlet expires = \"\";\r\n\tif (seconds) {\r\n\t\tlet date = new Date();\r\n\t\tdate.setTime(date.getTime() + seconds * 1000);\r\n\t\texpires = \"; expires=\" + date.toUTCString();\r\n\t}\r\n\tdocument.cookie = name + \"=\" + (value || \"\") + expires + \"; path=/\";\r\n}\r\n\r\nexport function clamp(n, min, max) {\r\n\treturn Math.min(Math.max(n, min), max);\r\n}\r\n\r\nexport function round(value, precision) {\r\n\tlet multiplier = Math.pow(10, precision || 0);\r\n\treturn Math.round(value * multiplier) / multiplier;\r\n}\r\n\r\nexport function msToTime(duration) {\r\n\t// \tvar milliseconds = parseInt((duration % 1000) / 100);\r\n\tlet milliseconds = parseInt((((duration / 1000) % 60) % 1) * 1000);\r\n\tlet seconds = parseInt((duration / 1000) % 60);\r\n\tlet minutes = parseInt((duration / (1000 * 60)) % 60);\r\n\tlet hours = parseInt((duration / (1000 * 60 * 60)) % 24);\r\n\thours = hours < 10 ? \"0\" + hours : hours;\r\n\tif (hours.length == 2 || (hours.length == 3 && hours[0] == \"0\")) {\r\n\t\thours = hours.substr(1);\r\n\t}\r\n\tminutes = minutes < 10 ? \"0\" + minutes : minutes;\r\n\tif (minutes.length == 3 || minutes.length == 4) {\r\n\t\tminutes = minutes.substr(1);\r\n\t}\r\n\tseconds = seconds < 10 ? \"0\" + seconds : seconds;\r\n\tif (seconds.length == 3 || seconds.length == 4) {\r\n\t\tseconds = seconds.substr(1);\r\n\t}\r\n\t//seconds = seconds.replaceAll(\"-\", \"\");\r\n\tif (seconds.length < 2) {\r\n\t\tseconds = \"0\" + seconds;\r\n\t}\r\n\tlet time = hours + \":\" + minutes + \":\" + seconds + \".\" + milliseconds;\r\n\ttime = time.replaceAll(\"-\", \"\"); // remove negative signs\r\n\treturn time;\r\n}\r\n\r\nexport function toggleFullscreen(elem) {\r\n\t// ## The below if statement seems to work better ## if ((document.fullScreenElement && document.fullScreenElement !== null) || (document.msfullscreenElement && document.msfullscreenElement !== null) || (!document.mozFullScreen && !document.webkitIsFullScreen)) {\r\n\tif (\r\n\t\t(document.fullScreenElement !== undefined && document.fullScreenElement === null) ||\r\n\t\t(document.msFullscreenElement !== undefined &&\r\n\t\t\tdocument.msFullscreenElement === null) ||\r\n\t\t(document.mozFullScreen !== undefined && !document.mozFullScreen) ||\r\n\t\t(document.webkitIsFullScreen !== undefined && !document.webkitIsFullScreen)\r\n\t) {\r\n\t\tif (elem.requestFullScreen) {\r\n\t\t\telem.requestFullScreen();\r\n\t\t} else if (elem.mozRequestFullScreen) {\r\n\t\t\telem.mozRequestFullScreen();\r\n\t\t} else if (elem.webkitRequestFullScreen) {\r\n\t\t\telem.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);\r\n\t\t} else if (elem.msRequestFullscreen) {\r\n\t\t\telem.msRequestFullscreen();\r\n\t\t}\r\n\t} else {\r\n\t\tif (document.cancelFullScreen) {\r\n\t\t\tdocument.cancelFullScreen();\r\n\t\t} else if (document.mozCancelFullScreen) {\r\n\t\t\tdocument.mozCancelFullScreen();\r\n\t\t} else if (document.webkitCancelFullScreen) {\r\n\t\t\tdocument.webkitCancelFullScreen();\r\n\t\t} else if (document.msExitFullscreen) {\r\n\t\t\tdocument.msExitFullscreen();\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function setToPercentParent(elem, percent) {\r\n\t$(elem).height(0);\r\n\tlet parentHeight = $(elem)\r\n\t\t.parent()\r\n\t\t.height();\r\n\tlet newHeight = (percent / 100) * parentHeight;\r\n\t$(elem).height(newHeight);\r\n}\r\n\r\n// like sleep, but worse:\r\nexport function wait(ms) {\r\n\tvar start = new Date().getTime();\r\n\tvar end = start;\r\n\twhile (end < start + ms) {\r\n\t\tend = new Date().getTime();\r\n\t}\r\n}\r\n\r\n// brings number closer to target by accel\r\nexport function mathZoom(current, target, accel) {\r\n\tif (current == target) {\r\n\t\treturn current;\r\n\t}\r\n\tif (Math.abs(current - target) < accel) {\r\n\t\treturn target;\r\n\t}\r\n\tif (current < target) {\r\n\t\treturn current + accel;\r\n\t} else {\r\n\t\treturn current - accel;\r\n\t}\r\n}\r\n\r\nexport function normalizeVector(vector, scale) {\r\n\tlet norm = Math.sqrt(vector.x * vector.x + vector.y * vector.y);\r\n\tif (norm !== 0) {\r\n\t\tvector.x = (scale * vector.x) / norm;\r\n\t\tvector.y = (scale * vector.y) / norm;\r\n\t}\r\n\treturn vector;\r\n}\r\n\r\nexport function abs(n) {\r\n\treturn Math.abs(n);\r\n}\r\n\r\n// delete all cookies:\r\nexport function deleteAllCookies() {\r\n\tlet cookies = document.cookie.split(\";\");\r\n\tfor (let i = 0; i < cookies.length; i++) {\r\n\t\tlet cookie = cookies[i];\r\n\t\tlet eqPos = cookie.indexOf(\"=\");\r\n\t\tlet name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;\r\n\t\tdocument.cookie = name + \"=;expires=Thu, 01 Jan 1970 00:00:00 GMT\";\r\n\t}\r\n}\r\n\r\nexport function fixedLengthString(string, pad, length) {\r\n\tstring = string + \"\";\r\n\twhile (string.length < length) {\r\n\t\tstring = pad + string;\r\n\t}\r\n\treturn string;\r\n}\r\n\r\nexport function getStickString(num) {\r\n\t// round to nearest tenth:\r\n\tnum = (Math.round((num + 1) * 10) / 10).toFixed(2);\r\n\tlet n = num * 10;\r\n\tif (n == 0) {\r\n\t\treturn \"900\";\r\n\t}\r\n\tif (n == 10) {\r\n\t\treturn \"090\";\r\n\t}\r\n\tif (n == 20) {\r\n\t\treturn \"009\";\r\n\t}\r\n\tif (n < 10) {\r\n\t\tn = 10 - n;\r\n\t\tn = 90 + 90 * n;\r\n\t} else {\r\n\t\tn = (20 - n) * 9;\r\n\t}\r\n\treturn String(n).padStart(3, \"0\");\r\n}\r\n\r\nexport function getAverage(array) {\r\n\treturn array.reduce((a, b) => a + b) / array.length;\r\n}\r\n\r\nexport function pick(...props) {\r\n\treturn (o) => props.reduce((a, e) => ({ ...a, [e]: o[e] }), {});\r\n}\r\n\r\nexport function interpolateColor(color1, color2, factor) {\r\n\tif (arguments.length < 3) {\r\n\t\tfactor = 0.5;\r\n\t}\r\n\tlet result = color1.slice();\r\n\tfor (let i = 0; i < 3; i++) {\r\n\t\tresult[i] = Math.round(result[i] + factor * (color2[i] - color1[i]));\r\n\t}\r\n\treturn result;\r\n}\r\n\r\nexport function interpolateColors(color1, color2, steps) {\r\n\tlet stepFactor = 1 / (steps - 1),\r\n\t\tinterpolatedColorArray = [];\r\n\r\n\tcolor1 = color1.match(/\\d+/g).map(Number);\r\n\tcolor2 = color2.match(/\\d+/g).map(Number);\r\n\r\n\tfor (let i = 0; i < steps; i++) {\r\n\t\tinterpolatedColorArray.push(interpolateColor(color1, color2, stepFactor * i));\r\n\t}\r\n\r\n\treturn interpolatedColorArray;\r\n}\r\n\r\nconst size = {\r\n\tmobile: \"600px\",\r\n\ttablet: \"768px\",\r\n\tlaptop: \"1024px\",\r\n\tdesktop: \"1440px\",\r\n};\r\n\r\nexport const device = {\r\n\tmobile: `@media (min-width: ${size.mobile})`,\r\n\ttablet: `@media (min-width: ${size.tablet})`,\r\n\tlaptop: `@media (min-width: ${size.laptop})`,\r\n\tdesktop: `@media (min-width: ${size.desktop})`,\r\n};\r\n","// react:\r\nimport React, { Component } from \"react\";\r\n\r\n// react-router:\r\nimport { Route, Switch, withRouter } from \"react-router\";\r\n\r\n// redux:\r\nimport { connect } from \"react-redux\";\r\n\r\n// actions:\r\nimport { updateSettings } from \"features/settings.js\";\r\n\r\n// redux-saga:\r\n\r\n// main components:\r\nimport Main from \"./Main.jsx\";\r\nimport Room from \"./Room.jsx\";\r\n\r\n// components:\r\n\r\n// secondary components:\r\n\r\n// material ui:\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\n// recompose:\r\nimport { compose } from \"recompose\";\r\n\r\n// libs:\r\nimport { device } from \"shared/libs/utils.js\";\r\n\r\n// jss:\r\nconst styles = {\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\theight: \"100%\",\r\n\t},\r\n\t[device.tablet]: {\r\n\t\troot: {},\r\n\t},\r\n\t[device.laptop]: {\r\n\t\troot: {},\r\n\t},\r\n};\r\n\r\nclass App extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.socket = null;\r\n\r\n\t\tthis.state = {\r\n\t\t\troomName: \"\",\r\n\t\t\topen: false,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.serverConnection) {\r\n\t\t\tthis.serverConnection.close();\r\n\t\t\tthis.serverConnection = null;\r\n\t\t}\r\n\t\tthis.serverConnection = this.props.serverConnection;\r\n\r\n\t\tthis.props.store.dispatch(updateSettings({ theme: \"spotify\" }));\r\n\r\n\t\tdocument.title = \"Democratic DJ\";\r\n\r\n\t\t// // listen to events and dispatch actions:\r\n\t\t// handleStreamEvents(this.socket, this.props.store.dispatch);\r\n\t\t// // handle outgoing events & listen to actions:\r\n\t\t// // and maybe dispatch more actions:\r\n\t\t// this.props.sagaMiddleware.run(handleStreamActions, {\r\n\t\t// \tsocket: this.socket,\r\n\t\t// \tdispatch: this.props.store.dispatch,\r\n\t\t// });\r\n\t}\r\n\r\n\t//52#60952: *2 open() \"/srv/www/fosse.co/htmlindex.html\" failed (2: No such file or directory),\r\n\t// client: 107.199.173.141, server: fosse.co, request: \"GET /dj/GKMLV/ HTTP/1.1\", host: \"fosse.co\"\r\n\t// \"/srv/www/fosse.co/html/projects/dj/public/dj/index.html\" is not found (2: No such file or direc\r\n\r\n\r\n\trender() {\r\n\t\tconsole.log(\"re-rendering dj-app.\");\r\n\r\n\t\tconsole.log(this.props.match.path);\r\n\r\n\t\tconst { classes } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\tpath={`${this.props.match.path}dj/:roomName`}\r\n\t\t\t\t\t\trender={(props) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Room\r\n\t\t\t\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\t\t\t\tstore={this.props.store}\r\n\t\t\t\t\t\t\t\t\tserverConnection={this.props.serverConnection}\r\n\t\t\t\t\t\t\t\t\t// sagaMiddleware={this.props.sagaMiddleware}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Route\r\n\t\t\t\t\t\tpath={this.props.match.path}\r\n\t\t\t\t\t\trender={(props) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Main\r\n\t\t\t\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\t\t\t\tstore={this.props.store}\r\n\t\t\t\t\t\t\t\t\tserverConnection={this.props.serverConnection}\r\n\t\t\t\t\t\t\t\t\t// sagaMiddleware={this.props.sagaMiddleware}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</Switch>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {};\r\n};\r\n\r\nexport default compose(\r\n\twithRouter,\r\n\twithStyles(styles),\r\n\tconnect(mapStateToProps, mapDispatchToProps),\r\n)(App);\r\n","const IP = \"https://fosse.co\";\r\nconst PORT = 8001;\r\n// react:\r\nimport React, { Component, lazy } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\n\r\n// react-router:\r\nimport { Route, Switch } from \"react-router\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\n// modals:\r\n\r\n// material ui:\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport { ThemeProvider } from \"@material-ui/styles\";\r\nimport { createTheme } from \"@material-ui/core/styles\";\r\n\r\n// notistack:\r\nimport { SnackbarProvider } from \"notistack\";\r\n\r\n// components:\r\n// import Loading from \"shared/components/general/Loading.jsx\";\r\n\r\n// const Callback = lazy(() => import(\"components/Callback.jsx\"));\r\nimport Callback from \"components/Callback.jsx\";\r\n\r\n// const DJ = lazy(() => import(\"dj/App.jsx\"));\r\n// const Party = lazy(() => import(\"party/App.jsx\"));\r\n\r\n// redux:\r\nimport { combineReducers } from \"redux\";\r\nimport { Provider } from \"react-redux\";\r\nimport { configureStore } from \"@reduxjs/toolkit\";\r\nlet storeContext = React.createContext();\r\n\r\n// import rootReducer from \"./reducers\";\r\n\r\nimport dj from \"reducers/index.js\";\r\nimport settings from \"features/settings.js\";\r\n\r\nlet rootReducer = combineReducers({\r\n\tdj,\r\n\tsettings,\r\n});\r\n\r\n// components:\r\nimport App from \"./App.jsx\";\r\n\r\n// libs:\r\nimport socketio from \"socket.io-client\";\r\n\r\nclass Index extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.serverConnection = socketio(IP, {\r\n      path: `/${PORT}/socket.io`,\r\n      transports: [\"polling\", \"websocket\", \"xhr-polling\", \"jsonp-polling\"],\r\n    });\r\n\r\n    this.state = {\r\n      theme: this.getTheme(\"spotify\"),\r\n    };\r\n\r\n    let preloadedState = {\r\n      settings: {},\r\n\r\n      dj: {\r\n        songs: {\r\n          songName: \"\",\r\n          songList: [],\r\n          searchResults: [],\r\n        },\r\n      },\r\n\r\n    //   form: {},\r\n    };\r\n\r\n\tthis.store = configureStore({\r\n\t\treducer: rootReducer,\r\n\t\tpreloadedState: preloadedState,\r\n\t\t// middleware: [this.sagaMiddleware],\r\n\t});\r\n\r\n    // let currentValue = null;\r\n    // this.store.subscribe(() => {\r\n    //   let previousValue = currentValue;\r\n    //   currentValue = this.store.getState().settings.theme;\r\n    //   if (previousValue !== currentValue && previousValue !== null) {\r\n    //     this.setState({ theme: this.getTheme(currentValue) });\r\n    //   }\r\n    // });\r\n  }\r\n\r\n  getTheme = (themeName) => {\r\n    let theme = {};\r\n    switch (themeName) {\r\n      case \"light\":\r\n        theme = {\r\n          palette: {\r\n            type: \"light\",\r\n            primary: {\r\n              main: \"#2181ff\", // #2181ff\r\n            },\r\n            secondary: {\r\n              main: \"#ff3b3b\",\r\n            },\r\n            background: {\r\n              paper: \"#fafafa\",\r\n            },\r\n          },\r\n        };\r\n        break;\r\n      case \"dark\":\r\n        theme = {\r\n          palette: {\r\n            type: \"dark\",\r\n            primary: {\r\n              main: \"#2181ff\", // #2181ff\r\n            },\r\n            secondary: {\r\n              main: \"#ff3b3b\",\r\n            },\r\n            background: {\r\n              paper: \"#424242\",\r\n            },\r\n          },\r\n        };\r\n        break;\r\n      case \"spotify\":\r\n        theme = {\r\n          palette: {\r\n            type: \"dark\",\r\n            primary: {\r\n              main: \"#1db954\",\r\n            },\r\n            secondary: {\r\n              main: \"#121212\",\r\n            },\r\n            background: {\r\n              paper: \"#424242\",\r\n            },\r\n          },\r\n        };\r\n        break;\r\n    }\r\n    return createTheme(theme);\r\n  };\r\n\r\n  componentDidMount() {\r\n    // this.switchTheme(\"dark\");\r\n    // this.switchTheme(\"spotify\");\r\n  }\r\n\r\n  shouldComponentUpdate(nextProps, nextState) {\r\n    return true;\r\n  }\r\n\r\n  render() {\r\n    console.log(\"re-rendering dj-index\");\r\n\r\n    return (\r\n      <Provider store={this.store}>\r\n        <ThemeProvider theme={this.state.theme}>\r\n          <SnackbarProvider maxSnack={3}>\r\n            <CssBaseline />\r\n            {/* <App\r\n              {...this.props}\r\n              serverConnection={this.serverConnection}\r\n              // sagaMiddleware={this.sagaMiddleware}\r\n            /> */}\r\n            <BrowserRouter>\r\n              <Switch>\r\n                <Route\r\n                  path=\"/dj/callback\"\r\n                  render={(props) => {\r\n                    return <Callback {...props} store={this.store} />;\r\n                  }}\r\n                />\r\n                <Route\r\n                  path=\"/\"\r\n                  render={(props) => {\r\n                    return <App {...props} store={this.store} serverConnection={this.serverConnection} />;\r\n                  }}\r\n                />\r\n              </Switch>\r\n            </BrowserRouter>\r\n          </SnackbarProvider>\r\n        </ThemeProvider>\r\n      </Provider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Index;\r\n\r\nReactDOM.render(<Index />, document.getElementById(\"root\"));\r\n","// react:\r\nimport React, { PureComponent } from \"react\";\r\n\r\n// react-router:\r\nimport { withRouter } from \"react-router\";\r\n\r\n// redux:\r\nimport { connect } from \"react-redux\";\r\n\r\n// actions:\r\nimport { updateSettings } from \"features/settings.js\";\r\n\r\n// redux-saga:\r\n\r\n// main components:\r\n\r\n// components:\r\n\r\n// secondary components:\r\nimport {\r\n\tButton,\r\n\tTextField,\r\n\tDialog,\r\n\tDialogActions,\r\n\tDialogContent,\r\n\tDialogContentText,\r\n\tDialogTitle,\r\n} from \"@material-ui/core\";\r\n\r\n// material ui:\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\n// recompose:\r\nimport { compose } from \"recompose\";\r\n\r\n// libs:\r\nimport { device } from \"shared/libs/utils.js\";\r\n\r\n// jss:\r\nconst styles = {\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tjustifyContent: \"space-evenly\",\r\n\t\theight: \"100vh\",\r\n\t\twidth: \"100%\",\r\n\t\tmaxWidth: \"600px\",\r\n\t\tmaxHeight: \"700px\",\r\n\t\tmargin: \"auto 0\",\r\n\t},\r\n\t[device.tablet]: {\r\n\t\troot: {},\r\n\t},\r\n\t[device.laptop]: {\r\n\t\troot: {\r\n\t\t\tmaxWidth: \"none\",\r\n\t\t\tmaxHeight: \"none\",\r\n\t\t},\r\n\t},\r\n\r\n\ttextField: {\r\n\t\tmargin: \"0px\",\r\n\t},\r\n\tformPart: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"row\",\r\n\t\t// justifyContent: \"space-evenly\",\r\n\t\tjustifyContent: \"center\",\r\n\t\t// width: \"50%\",\r\n\t\theight: \"min-content\",\r\n\t\t// padding: \"0 20%\",\r\n\t\t// margin: \"0 5px\",\r\n\t},\r\n\tcenterText: {\r\n\t\tdisplay: \"flex !important\",\r\n\t\tjustifyContent: \"center !important\",\r\n\t},\r\n\tjoinButton: {\r\n\t\twhiteSpace: \"nowrap\",\r\n\t},\r\n};\r\n\r\nclass Main extends PureComponent {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.socket = null;\r\n\r\n\t\tthis.state = {\r\n\t\t\troomName: \"\",\r\n\t\t\topen: false,\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.socket) {\r\n\t\t\tthis.socket.close();\r\n\t\t\tthis.socket = null;\r\n\t\t}\r\n\t\tthis.socket = this.props.serverConnection;\r\n\r\n\t\tthis.props.store.dispatch(updateSettings({ theme: \"spotify\" }));\r\n\r\n\t\t// // listen to events and dispatch actions:\r\n\t\t// handleStreamEvents(this.socket, this.props.store.dispatch);\r\n\t\t// // handle outgoing events & listen to actions:\r\n\t\t// // and maybe dispatch more actions:\r\n\t\t// this.props.sagaMiddleware.run(handleStreamActions, {\r\n\t\t// \tsocket: this.socket,\r\n\t\t// \tdispatch: this.props.store.dispatch,\r\n\t\t// });\r\n\t}\r\n\r\n\tcomponentWillUnmount = () => {\r\n\t\tthis.props.store.dispatch(updateSettings({ theme: \"dark\" }));\r\n\t};\r\n\r\n\thandleJoin = () => {\r\n\t\tthis.props.history.push(`/dj/${this.state.roomName}`);\r\n\t};\r\n\r\n\thandleCreate = () => {\r\n\t\tthis.socket.emit(\"createRoom\", null, (data) => {\r\n\t\t\tif (data.success) {\r\n\t\t\t\tthis.setState({ open: true, roomName: data.roomName });\r\n\t\t\t} else {\r\n\t\t\t\talert(data.reason);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\thandleClose = () => {\r\n\t\tthis.props.history.push(`/dj/${this.state.roomName}`);\r\n\t\tthis.setState({ open: false });\r\n\t};\r\n\r\n\thandleText = (event) => {\r\n\t\t// console.log(event.target.value);\r\n\t\tthis.setState({ roomName: event.target.value });\r\n\t};\r\n\r\n\trender() {\r\n\t\tconsole.log(\"re-rendering main\");\r\n\r\n\t\tconst { classes } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t<h1 style={{ textAlign: \"center\" }}>Democratic DJ</h1>\r\n\r\n\t\t\t\t<h2 className={classes.centerText}>Join a Room</h2>\r\n\t\t\t\t<div className={classes.formPart}>\r\n\t\t\t\t\t<TextField\r\n\t\t\t\t\t\tid=\"outlined-name\"\r\n\t\t\t\t\t\tlabel=\"Room Name\"\r\n\t\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\t\tvalue={this.state.roomName}\r\n\t\t\t\t\t\tonChange={this.handleText}\r\n\t\t\t\t\t\tmargin=\"normal\"\r\n\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div style={{ width: \"10px\" }} />\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName={classes.joinButton}\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tsize=\"medium\"\r\n\t\t\t\t\t\tonClick={this.handleJoin}\r\n\t\t\t\t\t\tonKeyPress={(event) => {\r\n\t\t\t\t\t\t\tif (event.key == \"Enter\") {\r\n\t\t\t\t\t\t\t\tthis.handleJoin();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tJoin Room\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<h2 className={classes.centerText}>OR</h2>\r\n\t\t\t\t<div className={classes.formPart}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t\tonClick={this.handleCreate}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tCreate A Room\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<Dialog\r\n\t\t\t\t\topen={this.state.open}\r\n\t\t\t\t\tonClose={this.handleClose}\r\n\t\t\t\t\tfullWidth={true}\r\n\t\t\t\t\tmaxWidth=\"sm\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<DialogTitle id=\"alert-dialog-title\">{\"Room Created!\"}</DialogTitle>\r\n\t\t\t\t\t<DialogContent>\r\n\t\t\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\r\n\t\t\t\t\t\t\tA room has been created with the room name {this.state.roomName}\r\n\t\t\t\t\t\t</DialogContentText>\r\n\t\t\t\t\t</DialogContent>\r\n\t\t\t\t\t<DialogActions>\r\n\t\t\t\t\t\t<Button onClick={this.handleClose} color=\"primary\" variant=\"contained\">\r\n\t\t\t\t\t\t\tOK\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</DialogActions>\r\n\t\t\t\t</Dialog>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {};\r\n};\r\n\r\nexport default compose(\r\n\twithRouter,\r\n\twithStyles(styles),\r\n\tconnect(mapStateToProps, mapDispatchToProps),\r\n)(Main);\r\n","// react:\r\nimport React, { PureComponent } from \"react\";\r\n\r\n// react-router:\r\nimport { withRouter } from \"react-router\";\r\n\r\n// redux:\r\nimport { connect } from \"react-redux\";\r\n\r\n// redux-saga:\r\nimport { updateSongList } from \"features/songs.js\";\r\n\r\n// main components:\r\n\r\n// components:\r\nimport SongList from \"components/general/SongList.jsx\";\r\nimport SongSubmitForm from \"components/general/SongSubmitForm.jsx\";\r\n\r\n// secondary components:\r\nimport {\r\n  Button,\r\n  TextField,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n} from \"@material-ui/core\";\r\n\r\n// material ui:\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\n// recompose:\r\nimport { compose } from \"recompose\";\r\n\r\n// libs:\r\nimport { device } from \"shared/libs/utils.js\";\r\nimport localforage from \"localforage\";\r\n\r\n// jss:\r\nconst styles = {\r\n  root: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    // justifyContent: \"space-between\",\r\n    fontSize: \"16px\",\r\n    width: \"100%\",\r\n    maxWidth: \"600px\",\r\n  },\r\n  [device.tablet]: {\r\n    root: {\r\n      fontSize: \"20px\",\r\n    },\r\n  },\r\n  [device.laptop]: {\r\n    root: {},\r\n  },\r\n\r\n  textField: {\r\n    margin: \"0px\",\r\n  },\r\n  formPart: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    justifyContent: \"space-evenly\",\r\n    // width: \"50%\",\r\n    height: \"min-content\",\r\n  },\r\n  exportButton: {\r\n\t  width: \"80%\",\r\n  },\r\n  logoutButton: {\r\n  },\r\n  spotifyButtonsContainer: {\r\n\tdisplay: \"flex\",\r\n\tjustifyContent: \"space-between\",\r\n  },\r\n};\r\n\r\nclass Room extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.socket = null;\r\n\r\n    this.state = {\r\n      username: \"\",\r\n      roomName: \"\",\r\n      openUsernameDialog: false,\r\n      loggedIn: false,\r\n      code: null,\r\n    };\r\n\r\n    this.roomName = null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    // // listen to events and dispatch actions:\r\n    // handleStreamEvents(this.socket, this.props.store.dispatch);\r\n    // // handle outgoing events & listen to actions:\r\n    // // and maybe dispatch more actions:\r\n    // this.props.sagaMiddleware.run(handleStreamActions, {\r\n    // \tsocket: this.socket,\r\n    // \tdispatch: this.props.store.dispatch,\r\n    // });\r\n\r\n    this.socket = this.props.serverConnection;\r\n\r\n    this.roomName = this.props.match.params.roomName;\r\n\r\n    if (!this.roomName) {\r\n      console.log(\"room name not set!\");\r\n    }\r\n\r\n    this.socket.on(\"songList\", (data) => {\r\n      this.props.updateSongList(data.songList);\r\n    });\r\n\r\n    localforage\r\n      .getItem(\"dj:roomInfo\")\r\n      .then((value) => {\r\n        if (value) {\r\n          if (value.username) {\r\n            this.socket.emit(\r\n              \"joinRoom\",\r\n              { roomName: this.roomName, username: value.username },\r\n              (data) => {\r\n                if (data.success) {\r\n                  if (value.code) {\r\n                    this.socket.emit(\r\n                      \"verifyToken\",\r\n                      { code: value.code },\r\n                      (data) => {\r\n                        if (data.success) {\r\n                          this.setState({\r\n                            openUsernameDialog: false,\r\n                            username: value.username,\r\n                            loggedIn: true,\r\n                            code: value.code,\r\n                          });\r\n                        } else {\r\n                          console.log(data.reason);\r\n                          this.setState({\r\n                            openUsernameDialog: false,\r\n                            username: value.username,\r\n                          });\r\n                        }\r\n                      }\r\n                    );\r\n                  } else {\r\n                    this.setState({ username: value.username });\r\n                  }\r\n                } else {\r\n                  this.setState({ openUsernameDialog: true });\r\n                }\r\n              }\r\n            );\r\n          } else {\r\n            localforage.clear();\r\n          }\r\n        } else {\r\n          this.setState({ openUsernameDialog: true });\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        this.setState({ openUsernameDialog: true });\r\n      });\r\n  }\r\n\r\n  componentWillUnmount() {}\r\n\r\n  // shouldComponentUpdate(nextProps, nextState) {\r\n  // \treturn false;\r\n  // }\r\n\r\n  handleSubmitUsername = () => {\r\n    if (this.state.username === \"\") {\r\n      alert(\"username can't be empty\");\r\n      return;\r\n    }\r\n\r\n    this.socket.emit(\r\n      \"joinRoom\",\r\n      { roomName: this.roomName, username: this.state.username },\r\n      (data) => {\r\n        if (data.success) {\r\n          this.setState({ openUsernameDialog: false });\r\n          localforage.setItem(\"dj:roomInfo\", {\r\n            roomName: this.roomName,\r\n            username: this.state.username,\r\n          });\r\n        } else {\r\n          alert(data.reason);\r\n        }\r\n      }\r\n    );\r\n  };\r\n\r\n  handleText = (event) => {\r\n    this.setState({ username: event.target.value });\r\n  };\r\n\r\n  handleLogin = () => {\r\n    if (this.state.username === \"\") {\r\n      alert(\"something went wrong!\");\r\n      window.location.reload();\r\n      return;\r\n    }\r\n    localforage\r\n      .setItem(\"dj:roomInfo\", {\r\n        roomName: this.roomName,\r\n        username: this.state.username,\r\n      })\r\n      .then(() => {\r\n        window.location.href =\r\n          \"https://accounts.spotify.com/authorize?response_type=code&client_id=501dbd9176ef4ef9af88bfedf7cb7e5a\\\r\n\t\t\t\t\t&scope=playlist-modify-private%20user-read-private%20user-read-email%20playlist-read-collaborative%20user-modify-playback-state%20playlist-modify-public%20playlist-read-private\\\r\n\t\t\t\t\t&redirect_uri=https%3A%2F%2Ffosse.co%2Fdj%2Fcallback\";\r\n      });\r\n  };\r\n\r\n  handleLogout = () => {\r\n\tlocalforage\r\n\t.getItem(\"dj:roomInfo\")\r\n\t.then((value) => {\r\n\t\troomName = value.roomName;\r\n\t\treturn localforage.setItem(\"dj:roomInfo\", { ...value, code: null });\r\n\t}).then(() => {\r\n\t\twindow.location.reload();\r\n\t});\r\n};\r\n\r\n  handleCreatePlaylist = () => {\r\n    this.socket.emit(\"createPlaylist\", { code: this.state.code }, (data) => {\r\n      if (data.success) {\r\n        alert(\"playlist created on your spotify account!\");\r\n      } else {\r\n        console.log(data.reason);\r\n      }\r\n    });\r\n  };\r\n\r\n  handleLogout = () => {\r\n    this.socket.emit(\"createPlaylist\", { code: this.state.code }, (data) => {\r\n      if (data.success) {\r\n        alert(\"playlist created on your spotify account!\");\r\n      } else {\r\n        console.log(data.reason);\r\n      }\r\n    });\r\n  };\r\n\r\n  render() {\r\n    console.log(\"rendering dj-room.\");\r\n\r\n    const { classes } = this.props;\r\n\r\n    return (\r\n      <div className={classes.root}>\r\n        <SongSubmitForm serverConnection={this.props.serverConnection} />\r\n        {this.props.searchResults.length > 0 && (\r\n          <SongList\r\n            serverConnection={this.props.serverConnection}\r\n            source={this.props.searchResults}\r\n            type=\"results\"\r\n          />\r\n        )}\r\n        {this.props.searchResults.length === 0 && (\r\n          <SongList\r\n            serverConnection={this.props.serverConnection}\r\n            username={this.state.username}\r\n            source={this.props.songList}\r\n            type=\"songs\"\r\n          />\r\n        )}\r\n\r\n        {!this.state.loggedIn ? (\r\n          <Button\r\n            className={classes.exportButton}\r\n            onClick={this.handleLogin}\r\n            color=\"primary\"\r\n            variant=\"contained\"\r\n          >\r\n            Login to Spotify\r\n          </Button>\r\n        ) : (\r\n          <div className={classes.spotifyButtonsContainer}>\r\n            <Button\r\n              className={classes.exportButton}\r\n              onClick={this.handleCreatePlaylist}\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n            >\r\n              Export to Spotify\r\n            </Button>\r\n            <Button\r\n              className={classes.logoutButton}\r\n              onClick={this.handleLogout}\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n            >\r\n              Logout\r\n            </Button>\r\n          </div>\r\n        )}\r\n\r\n        <Dialog\r\n          open={this.state.openUsernameDialog}\r\n          onClose={() => {}}\r\n          fullWidth={true}\r\n          maxWidth=\"sm\"\r\n        >\r\n          <DialogTitle id=\"alert-dialog-title\">Pick a username</DialogTitle>\r\n          <DialogContent>\r\n            <TextField\r\n              autoFocus\r\n              margin=\"dense\"\r\n              id=\"name\"\r\n              label=\"Username\"\r\n              type=\"username\"\r\n              value={this.state.username}\r\n              onChange={this.handleText}\r\n              onKeyPress={(event) => {\r\n                if (event.key == \"Enter\") {\r\n                  this.handleSubmitUsername();\r\n                }\r\n              }}\r\n              fullWidth\r\n            />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button\r\n              onClick={this.handleSubmitUsername}\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n            >\r\n              Submit\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    songList: state.dj.songs.songList,\r\n    searchResults: state.dj.songs.searchResults,\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    updateSongList: (data) => {\r\n      dispatch(updateSongList(data));\r\n    },\r\n  };\r\n};\r\n\r\nexport default compose(\r\n  withRouter,\r\n  withStyles(styles),\r\n  connect(mapStateToProps, mapDispatchToProps)\r\n)(Room);\r\n","// react:\r\nimport React, { PureComponent } from \"react\";\r\n\r\n// react-router:\r\nimport { withRouter } from \"react-router\";\r\n\r\n// redux:\r\nimport { connect } from \"react-redux\";\r\n\r\n// material ui:\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\n// recompose:\r\nimport { compose } from \"recompose\";\r\n\r\n// libs:\r\nimport { device } from \"shared/libs/utils.js\";\r\nimport queryString from \"query-string\";\r\nimport localforage from \"localforage\";\r\n\r\n// jss:\r\nconst styles = {\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\twidth: \"100%\",\r\n\t\t// height: \"100vh\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tmargin: \"0 auto\",\r\n\t\tmaxWidth: \"700px\",\r\n\t},\r\n\t[device.tablet]: {\r\n\t\troot: {},\r\n\t},\r\n\t[device.laptop]: {\r\n\t\troot: {},\r\n\t},\r\n\r\n\tlinks: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t},\r\n};\r\n\r\nclass Callback extends PureComponent {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tlet values = queryString.parse(this.props.location.search);\r\n\t\t// localforage\r\n\t\t// \t.setItem(\"dj:code\", values.code)\r\n\t\t// \t.then(() => {\r\n\t\t// \t\treturn localforage.getItem(\"dj:roomInfo\");\r\n\t\t// \t})\r\n\t\t// \t.then((value) => {\r\n\t\t// \t\tthis.props.history.replace(`/dj/${value.roomName}`);\r\n\t\t// \t})\r\n\t\t// \t.catch((error) => {\r\n\t\t// \t\tconsole.log(\"error getting/setting value!: \" + error);\r\n\t\t// \t});\r\n\r\n\t\tif (values.code) {\r\n\t\t\tlet roomName = null;\r\n\t\t\tlocalforage\r\n\t\t\t\t.getItem(\"dj:roomInfo\")\r\n\t\t\t\t.then((value) => {\r\n\t\t\t\t\troomName = value.roomName;\r\n\t\t\t\t\treturn localforage.setItem(\"dj:roomInfo\", { ...value, code: values.code });\r\n\t\t\t\t})\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tthis.props.history.replace(`/dj/${roomName}`);\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => {\r\n\t\t\t\t\tconsole.log(\"error getting/setting value!: \" + error);\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tconsole.log(\"no access code!\");\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentWillUnmount() {}\r\n\r\n\trender() {\r\n\r\n\t\tconst { classes } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t{/* <StreamsAppBar\r\n\t\t\t\t\thistory={this.props.history}\r\n\t\t\t\t/> */}\r\n\r\n\t\t\t\t{/* <ProjectList /> */}\r\n\r\n\t\t\t\t{/* selects the first matching path: */}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {};\r\n};\r\n\r\nexport default compose(\r\n\twithRouter,\r\n\twithStyles(styles),\r\n\tconnect(mapStateToProps, mapDispatchToProps),\r\n)(Callback);\r\n","// react:\r\nimport React, { PureComponent } from \"react\";\r\n\r\n// material ui:\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n\r\n// components:\r\nimport { IconButton, Paper, Button } from \"@material-ui/core\";\r\nimport SongPreview from \"./SongPreview.jsx\";\r\n\r\n// icons:\r\nimport {\r\n\tArrowUpward as ArrowUpwardIcon,\r\n\tArrowDownward as ArrowDownwardIcon,\r\n\tClose as CloseIcon,\r\n} from \"@material-ui/icons\";\r\n\r\n// redux:\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { updateSongName, updateSearchResults } from \"features/songs.js\";\r\n\r\n// recompose:\r\nimport { compose } from \"recompose\";\r\n\r\n// libs:\r\nimport { device } from \"shared/libs/utils.js\";\r\nimport classNames from \"classnames\";\r\n\r\n// jss:\r\n\r\nconst styles = (theme) => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"row\",\r\n\t\tminHeight: \"85px\",\r\n\t\tfontSize: \"16px\",\r\n\t},\r\n\tupvoteArea: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tjustifyContent: \"space-evenly\",\r\n\t\tmargin: \"0 10px\",\r\n\t},\r\n\tsongUpvotes: {\r\n\t\talignSelf: \"center\",\r\n\t\t// position: \"absolute\",\r\n\t\tfontSize: \"0.8em\",\r\n\t},\r\n\tplaceNum: {\r\n\t\ttextAlign: \"center\",\r\n\t\talignSelf: \"center\",\r\n\t\tmargin: \"0 10px\",\r\n\t\tfontSize: \"0.8em\",\r\n\t},\r\n\t[device.tablet]: {\r\n\t\troot: {\r\n\t\t\tminHeight: \"150px\",\r\n\t\t\tfontSize: \"20px\",\r\n\t\t},\r\n\t\tupvoteArea: {\r\n\t\t\tjustifyContent: \"space-between\",\r\n\t\t\tmargin: \"0 5px\",\r\n\t\t},\r\n\t\tsongUpvotes: {\r\n\t\t\t// position: \"relative\",\r\n\t\t\tfontSize: \"1em\",\r\n\t\t},\r\n\t\tplaceNum: {\r\n\t\t\tmargin: \"0 5px\",\r\n\t\t\tfontSize: \"1em\",\r\n\t\t},\r\n\t},\r\n\t[device.laptop]: {\r\n\t\troot: {},\r\n\t},\r\n\thighlighted: {\r\n\t\tbackgroundColor: \"#FAFAD2AA\",\r\n\t},\r\n\tsongName: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tjustifyContent: \"space-evenly\",\r\n\t\t\"& span:last-child\": {\r\n\t\t\tfontSize: \"0.8em\",\r\n\t\t},\r\n\t},\r\n\ticon: {\r\n\t\t// width: \"70px\",\r\n\t\t// height: \"70px\",\r\n\t},\r\n\r\n\tsongSuggester: {\r\n\t\t// marginLeft: \"auto\",\r\n\t\t// marginRight: \"20px\",\r\n\t\tfontSize: \"0.8em\",\r\n\t\t// alignSelf: \"center\",\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\ttextAlign: \"center\",\r\n\t\tjustifyContent: \"center\",\r\n\t\twhiteSpace: \"nowrap\",\r\n\t},\r\n\tremoveArea: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"column\",\r\n\t\tjustifyContent: \"space-evenly\",\r\n\t\tmarginRight: \"10px\",\r\n\t},\r\n\tsubmitButton: {\r\n\t\tmarginLeft: \"auto\",\r\n\t\tmarginRight: \"10px\",\r\n\t\tmarginTop: \"auto\",\r\n\t\tmarginBottom: \"auto\",\r\n\t},\r\n});\r\n\r\nclass Song extends PureComponent {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.upvoteState = 0;\r\n\t}\r\n\r\n\tcomponentDidMount() {}\r\n\r\n\t// shouldComponentUpdate(nextProps, nextState) {\r\n\r\n\t// }\r\n\r\n\tcomponentWillUnmount() {\r\n\t\t// this.setState({ upvoteState: 0 });\r\n\t}\r\n\r\n\thandleSubmitSong = () => {\r\n\t\tthis.props.serverConnection.emit(\r\n\t\t\t\"submitSong\",\r\n\t\t\t{\r\n\t\t\t\tsongData: this.props.songData,\r\n\t\t\t},\r\n\t\t\t(data) => {\r\n\t\t\t\tif (!data.success) {\r\n\t\t\t\t\talert(data.reason);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t);\r\n\t\tthis.props.updateSongName(\"\");\r\n\t\tthis.props.updateSearchResults([]);\r\n\t};\r\n\r\n\thandleUpvote = () => {\r\n\t\tif (this.upvoteState === 1) {\r\n\t\t\tthis.neutralVote();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.props.serverConnection.emit(\r\n\t\t\t\"vote\",\r\n\t\t\t{\r\n\t\t\t\tsongName: this.props.songData.songName,\r\n\t\t\t\ttype: \"up\",\r\n\t\t\t},\r\n\t\t\t(data) => {\r\n\t\t\t\tif (data.success) {\r\n\t\t\t\t\t// this.upvoteState = 1;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t);\r\n\t};\r\n\r\n\thandleDownvote = () => {\r\n\t\tif (this.upvoteState === -1) {\r\n\t\t\tthis.neutralVote();\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.props.serverConnection.emit(\r\n\t\t\t\"vote\",\r\n\t\t\t{\r\n\t\t\t\tsongName: this.props.songData.songName,\r\n\t\t\t\ttype: \"down\",\r\n\t\t\t},\r\n\t\t\t(data) => {\r\n\t\t\t\tif (data.success) {\r\n\t\t\t\t\t// this.upvoteState = -1;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t);\r\n\t};\r\n\r\n\tneutralVote = () => {\r\n\t\tthis.props.serverConnection.emit(\r\n\t\t\t\"vote\",\r\n\t\t\t{\r\n\t\t\t\tsongName: this.props.songData.songName,\r\n\t\t\t\ttype: \"neutral\",\r\n\t\t\t},\r\n\t\t\t(data) => {\r\n\t\t\t\tif (data.success) {\r\n\t\t\t\t\t// this.upvoteState = 0;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t);\r\n\t};\r\n\r\n\thandleRemove = () => {\r\n\t\tthis.props.serverConnection.emit(\r\n\t\t\t\"removeSong\",\r\n\t\t\t{\r\n\t\t\t\tsongName: this.props.songData.songName,\r\n\t\t\t},\r\n\t\t\t(data) => {\r\n\t\t\t\tif (data.success) {\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t);\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\r\n\t\tlet isMobile = window.innerWidth < 768;\r\n\t\tlet albumImage = this.props.songData.album.images[isMobile ? 2 : 1];\r\n\t\tlet buttonSize = isMobile ? \"small\" : \"medium\";\r\n\r\n\t\tif (this.props.isResult) {\r\n\t\t\treturn (\r\n\t\t\t\t<Paper className={classes.root} elevation={4}>\r\n\t\t\t\t\t<SongPreview\r\n\t\t\t\t\t\timageURL={albumImage.url}\r\n\t\t\t\t\t\taudioURL={this.props.songData.preview_url}\r\n\t\t\t\t\t\tsongName={this.props.songData.songName}\r\n\t\t\t\t\t\tartistName={this.props.songData.album.artists[0].name}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div style={{ width: \"20px\" }}></div>\r\n\t\t\t\t\t<div className={classes.songName}>\r\n\t\t\t\t\t\t<span>{this.props.songData.songName}</span>\r\n\t\t\t\t\t\t<span>{this.props.songData.album.artists[0].name}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tclassName={classes.submitButton}\r\n\t\t\t\t\t\tonClick={this.handleSubmitSong}\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tsize=\"large\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Paper>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\tlet votes = this.props.songData.votes;\r\n\t\t\tfor (let i = 0; i < votes.length; i++) {\r\n\t\t\t\tlet vote = votes[i];\r\n\t\t\t\tif (vote.username === this.props.username) {\r\n\t\t\t\t\tif (vote.type === \"up\") {\r\n\t\t\t\t\t\tthis.upvoteState = 1;\r\n\t\t\t\t\t} else if (vote.type === \"down\") {\r\n\t\t\t\t\t\tthis.upvoteState = -1;\r\n\t\t\t\t\t} else if (vote.type === \"neutral\") {\r\n\t\t\t\t\t\tthis.upvoteState = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<Paper className={classes.root} elevation={4}>\r\n\t\t\t\t\t<div className={classes.placeNum}>#{this.props.num + 1}</div>\r\n\t\t\t\t\t<div className={classes.upvoteArea}>\r\n\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tsize={buttonSize}\r\n\t\t\t\t\t\t\tonClick={this.handleUpvote}\r\n\t\t\t\t\t\t\tclassName={classNames(\r\n\t\t\t\t\t\t\t\tclasses.icon,\r\n\t\t\t\t\t\t\t\tthis.upvoteState === 1 && classes.highlighted,\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ArrowUpwardIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t<div className={classes.songUpvotes}>{this.props.songData.upvotes}</div>\r\n\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\tsize={buttonSize}\r\n\t\t\t\t\t\t\tonClick={this.handleDownvote}\r\n\t\t\t\t\t\t\tclassName={classNames(\r\n\t\t\t\t\t\t\t\tclasses.icon,\r\n\t\t\t\t\t\t\t\tthis.upvoteState === -1 && classes.highlighted,\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<ArrowDownwardIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<SongPreview\r\n\t\t\t\t\t\timageURL={albumImage.url}\r\n\t\t\t\t\t\taudioURL={this.props.songData.preview_url}\r\n\t\t\t\t\t\tsongName={this.props.songData.songName}\r\n\t\t\t\t\t\tartistName={this.props.songData.album.artists[0].name}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<div style={{ width: \"20px\" }}></div>\r\n\r\n\t\t\t\t\t<div className={classes.songName}>\r\n\t\t\t\t\t\t<span>{this.props.songData.songName}</span>\r\n\t\t\t\t\t\t<span>{this.props.songData.album.artists[0].name}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ minWidth: \"10px\", flex: \"1\" }}></div>\r\n\t\t\t\t\t{/* <div className={classes.songSuggester}>\r\n\t\t\t\t\t\t<span>{\"suggested by: \"}</span>\r\n\t\t\t\t\t\t<span>{this.props.songData.username}</span>\r\n\t\t\t\t\t</div> */}\r\n\t\t\t\t\t<div style={{ width: \"10px\" }}></div>\r\n\r\n\t\t\t\t\t{this.props.songData.username === this.props.username && (\r\n\t\t\t\t\t\t<div className={classes.removeArea}>\r\n\t\t\t\t\t\t\t<IconButton\r\n\t\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\t\t\tsize={buttonSize}\r\n\t\t\t\t\t\t\t\tonClick={this.handleRemove}\r\n\t\t\t\t\t\t\t\tclassName={classNames(\r\n\t\t\t\t\t\t\t\t\tclasses.icon,\r\n\t\t\t\t\t\t\t\t\tthis.upvoteState === -1 && classes.highlighted,\r\n\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<CloseIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</Paper>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tupdateSongName: (data) => {\r\n\t\t\tdispatch(updateSongName(data));\r\n\t\t},\r\n\t\tupdateSearchResults: (data) => {\r\n\t\t\tdispatch(updateSearchResults(data));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default compose(\r\n\twithStyles(styles),\r\n\tconnect(mapStateToProps, mapDispatchToProps, null, { forwardRef: true }),\r\n)(Song);\r\n","// react:\r\nimport React, { PureComponent } from \"react\";\r\n// import PropTypes from \"prop-types\";\r\n\r\n// components:\r\nimport Song from \"./Song.jsx\";\r\n\r\n// material ui:\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { Paper } from \"@material-ui/core\";\r\n\r\n// redux:\r\nimport { connect } from \"react-redux\";\r\n\r\n// recompose:\r\nimport { compose } from \"recompose\";\r\n\r\n// libs:\r\nimport FlipMove from \"react-flip-move\";\r\n// import swal from \"sweetalert2\";\r\n\r\n// jss:\r\n\r\nconst styles = (theme) => ({\r\n\troot: {\r\n\t\t// display: \"flex\",\r\n\t\tdisplay: \"grid\",\r\n\t\tflexDirection: \"column\",\r\n\t\tgridGap: \"5px\",\r\n\t\tpadding: \"10px\",\r\n\t\toverflowY: \"auto\",\r\n\t\toverflowX: \"hidden\",\r\n\t\tposition: \"relative\",\r\n\t\tmargin: \"10px 0\",\r\n\t},\r\n\tnoSongs: {\r\n\t\ttextAlign: \"center\",\r\n\t},\r\n});\r\n\r\nclass SongList extends PureComponent {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\t// this.handleClick = this.handleClick.bind(this);\r\n\r\n\t\tthis.state = {};\r\n\t}\r\n\r\n\thandleClick(event) {}\r\n\r\n\tmapSongs() {\r\n\t\tlet songs = [];\r\n\r\n\t\tfor (let i = 0; i < this.props.source.length; i++) {\r\n\t\t\tlet song = this.props.source[i];\r\n\t\t\tsongs.push(\r\n\t\t\t\t<Song\r\n\t\t\t\t\tkey={song.uri}\r\n\t\t\t\t\tnum={i}\r\n\t\t\t\t\tserverConnection={this.props.serverConnection}\r\n\t\t\t\t\tusername={this.props.username}\r\n\t\t\t\t\tsongData={{ ...song }}\r\n\t\t\t\t\tisResult={this.props.type === \"results\"}\r\n\t\t\t\t/>,\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\tif (songs.length === 0) {\r\n\t\t\tsongs.push(\r\n\t\t\t\t<div key={0} className={this.props.classes.noSongs}>\r\n\t\t\t\t\t{this.props.type === \"songs\" ? \"No songs submitted yet!\" : \"No Songs Found!\"}\r\n\t\t\t\t</div>,\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn songs;\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\r\n\t\tif (this.props.source.length === 0) {\r\n\t\t\treturn (\r\n\t\t\t\t<Paper id=\"songList\" className={classes.root} elevation={4}>\r\n\t\t\t\t\t<div key={0} className={this.props.classes.noSongs}>\r\n\t\t\t\t\t\t{this.props.type === \"songs\" ? \"No songs submitted yet!\" : \"No Songs Found!\"}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Paper>\r\n\t\t\t);\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<Paper id=\"songList\" className={classes.root} elevation={4}>\r\n\t\t\t\t{/* {this.mapSongs()} */}\r\n\t\t\t\t<FlipMove\r\n\t\t\t\t\ttypeName={null}\r\n\t\t\t\t\tduration={250}\r\n\t\t\t\t\tstaggerDelayBy={0}\r\n\t\t\t\t\tenterAnimation=\"fade\"\r\n\t\t\t\t\tleaveAnimation=\"fade\"\r\n\t\t\t\t>\r\n\t\t\t\t\t{this.mapSongs()}\r\n\t\t\t\t</FlipMove>\r\n\t\t\t\t<div style={{ height: \"4px\" }} />\r\n\t\t\t</Paper>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {};\r\n};\r\n\r\nexport default compose(\r\n\twithStyles(styles),\r\n\tconnect(mapStateToProps, mapDispatchToProps),\r\n)(SongList);\r\n","// react:\r\nimport React, { PureComponent } from \"react\";\r\n\r\n// material ui:\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\n// import ArrowUpwardIcon from \"@material-ui/icons/ArrowUpward\";\r\n// import ArrowDownwardIcon from \"@material-ui/icons/ArrowDownward\";\r\n// import CloseIcon from \"@material-ui/icons/Close\";\r\n\r\n// components:\r\n// import { IconButton, Paper, Button } from \"@material-ui/core\";\r\n// import MySlider from \"dj/components/General/MySlider.jsx\";\r\n\r\n// icons:\r\n// import PlayArrowIcon from \"@material-ui/icons/PlayArrow\";\r\n// import PlayCircleFilledIcon from \"@material-ui/icons/PlayCircleFilled\";\r\nimport PlayCircleFilledTwoToneIcon from \"@material-ui/icons/PlayCircleFilledTwoTone\";\r\n// import PauseIcon from \"@material-ui/icons/Pause\";\r\n// import PauseCircleFilledIcon from \"@material-ui/icons/PauseCircleFilled\";\r\n// import PauseCircleOutlineIcon from \"@material-ui/icons/PauseCircleOutline\";\r\nimport PauseCircleFilledTwoToneIcon from \"@material-ui/icons/PauseCircleFilledTwoTone\";\r\n\r\n// redux:\r\nimport { connect } from \"react-redux\";\r\n\r\n// recompose:\r\nimport { compose } from \"recompose\";\r\n\r\n// libs:\r\nimport { device } from \"shared/libs/utils.js\";\r\n\r\n// jss:\r\n\r\nconst styles = (theme) => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"row\",\r\n\t\tminHeight: \"75px\",\r\n\t\tfontSize: \"16px\",\r\n\t\tposition: \"relative\",\r\n\t},\r\n\talbumArt: {\r\n\t\talignSelf: \"center\",\r\n\t\twidth: \"75px\",\r\n\t\theight: \"auto\",\r\n\t\tcursor: \"pointer\",\r\n\t\tborderRadius: \"8px\",\r\n\t},\r\n\ticon: {\r\n\t\tpointerEvents: \"none\",\r\n\t\tfontSize: \"50px\",\r\n\t\topacity: 0.7,\r\n\t\tposition: \"absolute\",\r\n\t\t// left: \"calc(50% - 0.5em)\",\r\n\t\t// top: \"calc(50% - 0.5em)\",\r\n\t\tleft: \"50%\",\r\n\t\tmarginLeft: \"-0.5em\",\r\n\t\ttop: \"50%\",\r\n\t\tmarginTop: \"-0.5em\",\r\n\t},\r\n\t[device.tablet]: {\r\n\t\troot: {\r\n\t\t\tminHeight: \"150px\",\r\n\t\t\tfontSize: \"20px\",\r\n\t\t},\r\n\t\talbumArt: {\r\n\t\t\twidth: \"150px\",\r\n\t\t},\r\n\t\ticon: {\r\n\t\t\tfontSize: \"90px\",\r\n\t\t},\r\n\t},\r\n\t[device.laptop]: {\r\n\t\troot: {},\r\n\t},\r\n});\r\n\r\nclass SongPreview extends PureComponent {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tplaying: false,\r\n\t\t};\r\n\r\n\t\tthis.audio = null;\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif (this.props.audioURL) {\r\n\t\t\tthis.audio = new Audio(this.props.audioURL);\r\n\t\t\tthis.audio.volume = 0.1;\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidUpdate(prevProps) {\r\n\t\t// Typical usage (don't forget to compare props):\r\n\t\tif (this.props.audioURL !== prevProps.audioURL) {\r\n\t\t\tif (prevProps.audioURL) {\r\n\t\t\t\tthis.audio.pause();\r\n\t\t\t}\r\n\r\n\t\t\tif (this.props.audioURL) {\r\n\t\t\t\tthis.audio = new Audio(this.props.audioURL);\r\n\t\t\t\tthis.audio.volume = 0.1;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// shouldComponentUpdate(nextProps, nextState) {\r\n\r\n\t// }\r\n\r\n\tcomponentWillUnmount() {\r\n\t\t// this.setState({ upvoteState: 0 });\r\n\t}\r\n\r\n\thandleClick = () => {\r\n\t\tif (this.state.playing) {\r\n\t\t\tif (this.audio) {\r\n\t\t\t\tthis.audio.pause();\r\n\t\t\t\tthis.audio.currentTime = 0;\r\n\t\t\t}\r\n\t\t\tdocument.title = \"Democratic DJ\";\r\n\t\t\tthis.setState({ playing: false });\r\n\t\t} else {\r\n\t\t\tif (!this.audio && this.props.audioURL) {\r\n\t\t\t\tthis.audio = new Audio(this.props.audioURL);\r\n\t\t\t\tthis.audio.volume = 0.1;\r\n\t\t\t}\r\n\t\t\tif (this.props.audioURL) {\r\n\t\t\t\tthis.audio.play();\r\n\t\t\t}\r\n\t\t\tdocument.title = `${this.props.songName}`;\r\n\t\t\tthis.setState({ playing: true });\r\n\t\t}\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\r\n\t\tif (!this.props.audioURL) {\r\n\t\t\tconsole.log(this.props.songName);\r\n\t\t}\r\n\r\n\t\tif (this.props.audioURL) {\r\n\t\t\treturn (\r\n\t\t\t\t<div className={classes.root} onClick={this.handleClick}>\r\n\t\t\t\t\t<img className={classes.albumArt} src={this.props.imageURL} />\r\n\r\n\t\t\t\t\t{this.state.playing ? (\r\n\t\t\t\t\t\t<PauseCircleFilledTwoToneIcon className={classes.icon} />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<PlayCircleFilledTwoToneIcon className={classes.icon} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn (\r\n\t\t\t\t<div className={classes.root}>\r\n\t\t\t\t\t<img className={classes.albumArt} src={this.props.imageURL} />\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {};\r\n};\r\n\r\nexport default compose(\r\n\twithStyles(styles),\r\n\tconnect(mapStateToProps, mapDispatchToProps),\r\n)(SongPreview);\r\n","// react:\r\nimport React, { PureComponent } from \"react\";\r\n// import PropTypes from \"prop-types\";\r\n\r\n// components:\r\n// import SearchResults from \"./SearchResults.jsx\";\r\n\r\n// material ui:\r\nimport { withStyles } from \"@material-ui/core/styles\";\r\nimport { Paper, TextField } from \"@material-ui/core\";\r\n\r\n// redux:\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { updateSongName, updateSearchResults } from \"features/songs.js\";\r\n\r\n// recompose:\r\nimport { compose } from \"recompose\";\r\n\r\n// libs:\r\n// import swal from \"sweetalert2\";\r\n\r\n// Returns a function, that, when invoked, will only be triggered at most once\r\n// during a given window of time. Normally, the throttled function will run\r\n// as much as it can, without ever going more than once per `wait` duration;\r\n// but if you'd like to disable the execution on the leading edge, pass\r\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\r\nfunction throttle(func, wait, options) {\r\n\tlet context, args, result;\r\n\tlet timeout = null;\r\n\tlet previous = 0;\r\n\tif (!options) {\r\n\t\toptions = {};\r\n\t}\r\n\tlet later = () => {\r\n\t\tprevious = options.leading === false ? 0 : Date.now();\r\n\t\ttimeout = null;\r\n\t\tresult = func.apply(context, args);\r\n\t\tif (!timeout) {\r\n\t\t\tcontext = args = null;\r\n\t\t}\r\n\t};\r\n\treturn function() {\r\n\t\tlet now = Date.now();\r\n\t\tif (!previous && options.leading === false) previous = now;\r\n\t\tlet remaining = wait - (now - previous);\r\n\t\tcontext = this;\r\n\t\targs = arguments;\r\n\t\tif (remaining <= 0 || remaining > wait) {\r\n\t\t\tif (timeout) {\r\n\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\ttimeout = null;\r\n\t\t\t}\r\n\t\t\tprevious = now;\r\n\t\t\tresult = func.apply(context, args);\r\n\t\t\tif (!timeout) context = args = null;\r\n\t\t} else if (!timeout && options.trailing !== false) {\r\n\t\t\ttimeout = setTimeout(later, remaining);\r\n\t\t}\r\n\t\treturn result;\r\n\t};\r\n}\r\n\r\nlet searchForSong = throttle((self, value) => {\r\n\t// moved to debounce fn bc otherwise it can happen out of order:\r\n\tif (value === \"\") {\r\n\t\tself.props.updateSearchResults([]);\r\n\t\treturn;\r\n\t}\r\n\r\n\tself.socket.emit(\"searchSong\", { songName: value }, (data) => {\r\n\t\tself.props.updateSearchResults(data.searchResults);\r\n\t});\r\n}, 500);\r\n\r\n// jss:\r\n\r\nconst styles = (theme) => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexDirection: \"row\",\r\n\t},\r\n\ttextField: {\r\n\t\tmargin: \"2%\",\r\n\t},\r\n});\r\n\r\nclass SongSubmitForm extends PureComponent {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.socket = null;\r\n\r\n\t\tthis.state = {\r\n\t\t\tsongName: \"\",\r\n\t\t\tsearchResults: [],\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.socket = this.props.serverConnection;\r\n\t}\r\n\r\n\thandleText = (event) => {\r\n\t\tthis.props.updateSongName(event.target.value);\r\n\t\tsearchForSong(this, event.target.value);\r\n\t};\r\n\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\r\n\t\treturn (\r\n\t\t\t<Paper id=\"songSubmitForm\" className={classes.root} elevation={4}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tid=\"songSearchField\"\r\n\t\t\t\t\tlabel=\"Enter a Song or Artist Name\"\r\n\t\t\t\t\tclassName={classes.textField}\r\n\t\t\t\t\tvalue={this.props.songName}\r\n\t\t\t\t\tonChange={this.handleText}\r\n\t\t\t\t\tmargin=\"normal\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n\treturn {\r\n\t\tsongName: state.dj.songs.songName,\r\n\t};\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tupdateSongName: (data) => {\r\n\t\t\tdispatch(updateSongName(data));\r\n\t\t},\r\n\t\tupdateSearchResults: (data) => {\r\n\t\t\tdispatch(updateSearchResults(data));\r\n\t\t},\r\n\t};\r\n};\r\n\r\nexport default compose(\r\n\twithStyles(styles),\r\n\tconnect(mapStateToProps, mapDispatchToProps),\r\n)(SongSubmitForm);\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst settingsSlice = createSlice({\r\n\tname: \"settings\",\r\n\tinitialState: {\r\n\t\ttheme: \"dark\",\r\n\t},\r\n\treducers: {\r\n\t\tupdateSettings(state, action) {\r\n\t\t\treturn { ...state, ...action.payload }; // sets entire state\r\n\t\t},\r\n\t},\r\n});\r\nexport const { updateSettings } = settingsSlice.actions;\r\nexport default settingsSlice.reducer;\r\n","import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst songsSlice = createSlice({\r\n\tname: \"songs\",\r\n\tinitialState: {\r\n\t\tsongName: \"\",\r\n\t\tsongList: [],\r\n\t\tsearchResults: [],\r\n\t},\r\n\treducers: {\r\n\t\tupdateSongName(state, action) {\r\n\t\t\tstate.songName = action.payload;\r\n\t\t},\r\n\t\tupdateSongList(state, action) {\r\n\t\t\tstate.songList = action.payload;\r\n\t\t},\r\n\t\tupdateSearchResults(state, action) {\r\n\t\t\tstate.searchResults = action.payload;\r\n\t\t},\r\n\t},\r\n});\r\nexport const { updateSongName, updateSongList, updateSearchResults } = songsSlice.actions;\r\nexport default songsSlice.reducer;\r\n","import { combineReducers } from \"redux\";\nimport { reducer as form } from \"redux-form\";\n\nimport songs from \"../features/songs.js\";\n\nconst rootReducer = combineReducers({\n\tsongs,\n\tform,\n});\n\nexport default rootReducer;\n","/* (ignored) */"],"sourceRoot":""}